<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd"> 

<mapper namespace="com.vinflux.mobile.ems.image">
	<parameterMap id="parameterMap" type="java.util.HashMap" />
 	<resultMap id="resultMap" type="java.util.HashMap" />


	<select id="SelectImageInfo" parameterMap="parameterMap" resultMap="resultMap">
		<![CDATA[
			SELECT *
			  FROM TSE_INFO_IMG
			 WHERE FILEID = #{FILEID}
		]]>		
	</select>
	
	
	<insert id="InsertImageInfo" parameterMap="parameterMap">
		<![CDATA[
			INSERT INTO TSE_INFO_IMG 
			(
			  FILEID
			, IMGSEQ
			, IMGCATL
			, IMGTYPE
			, IMGURL
			, FILEPATH
			, DISPLAYORD
			, ISDISPLAY
			, INSERTDATE
			, UPDATEDATE
			)
		    VALUES
		    (
		      #{FILEID}
		    , '1'
		    , '00'
		    , #{IMGTYPE}
			, #{IMGDATA}
		]]>	
		<choose>
		   <when test="FILEPATH == null">
				, 'NONE'
		   </when>
		   <otherwise>
				, #{FILEPATH}
		   </otherwise>
		</choose>
 
 		<![CDATA[
		    , 1
		    , 'Y'
		    , to_char(current_timestamp,'YYYYMMDDHH24MISS')
		    , to_char(current_timestamp,'YYYYMMDDHH24MISS')
		    )	
		]]>		
	</insert>


	<update id="UpdateImageInfo" parameterMap="parameterMap">
		
		<![CDATA[
			UPDATE TSE_INFO_IMG
			   SET UPDATEDATE = to_char(current_timestamp,'YYYYMMDDHH24MISS')
		]]>	
		
		<if test="IMGDATA != null">
			<![CDATA[
				 , IMGURL  = #{IMGDATA}
			]]>	
		</if>
		
		<if test="FILEPATH != null">
			<![CDATA[
				 , FILEPATH = #{FILEPATH}
			]]>	
		</if>


		<if test="IMGTYPE != null">
			<![CDATA[
				 , IMGTYPE = #{IMGTYPE}
			]]>	
		</if>
				
		<![CDATA[
			 WHERE FILEID = #{FILEID}
		]]>	
		
	</update>

	

</mapper>